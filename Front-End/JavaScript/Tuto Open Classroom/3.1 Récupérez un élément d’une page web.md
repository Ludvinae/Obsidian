
Dans la partie prÃ©cÃ©dente, nous avons dÃ©couvert la logique de programmation en JavaScript, et nous avons manipulÃ© des structures conditionnelles, des boucles et des fonctions. Nous avons fait une belle partie du chemin, mais pour lâ€™instant, nous nous sommes contentÃ©s dâ€™Ã©crire dans la console. Notre prochaine Ã©tape est donc de **manipuler directement une page HTML** **pour la rendre interactive**. Dans le cadre de notre application Azertype, cela permettra dâ€™afficher en HTML les mots Ã  recopier et le score.

Pour apprÃ©hender cette Ã©tape, vous devez donc maÃ®triser les fondamentaux du langage HTML. Si ce nâ€™est pas le cas, je vous conseille fortement de suivre le cours _[CrÃ©ez votre site web avec HTML 5 et CSS 3](https://openclassrooms.com/fr/courses/1603881-creez-votre-site-web-avec-html5-et-css3)_.

Notre premiÃ¨re Ã©tape, dans ce chapitre, est dâ€™**Ã©tablir un lien entre le code HTML et le code JavaScript**. Cela nous permettra, dans le chapitre suivant, de modifier le code HTML directement depuis notre code JavaScript. Alors, avant de rentrer dans le vif du sujet, regardons ensemble comment une page web est structurÃ©eÂ !Â ğŸ˜‰

# ApprÃ©hendez la structure dâ€™une page web

GÃ©nÃ©ralement, une page web est constituÃ©e de deux partiesÂ :

- un _**head**_ qui donne des informations gÃ©nÃ©rales sur la pageÂ ;
- un _**body**_ qui contient ce qui est affichÃ© dans la page.Â 

> Voici un exemple de body pour une page simpleÂ :

```
<body>
    <header>
        <h1>AzerType</h1>
    </header>
    <main>
        <div>
            <h2>Le jeu</h2>
            <p>Un petit texte</p>
        </div>
        <div>
            <h2>Une autre div</h2>
            <p>Un autre texte</p>
        </div>
    </main>
    <footer>
        @Copyright : OpenClassrooms.
    </footer>
</body>
```

Ce code HTML est simple. Il est constituÃ© dâ€™un _header_ avec un titre, dâ€™un corps (_main_) et dâ€™un _footer_.

Ce code est un peu structurÃ© comme un arbre, câ€™est pourquoi on appelle cette structure lâ€™**arbre DOM** (Document Object Model, ou modÃ¨le objet du document, en franÃ§ais). En fait, JavaScript ne lit pas une page HTML comme du simple texte. Il la reprÃ©sente comme une structure organisÃ©e en parents/enfants, et composÃ©e de nÅ“uds qui reprÃ©sentent des balises.

*Ouh lÃ  lÃ  lÃ , Ã§a devient un peu abstrait ton truc, lÃ â€¦Â ğŸ˜…*

Câ€™est un peu imagÃ© oui, mais revenons ensemble sur lâ€™illustration de lâ€™arbre DOM ci-dessousÂ :

[![Structure de l'arbre DOM. En haut la racine de lâ€™arbre DOM. Au milieu les branches, qui mÃ¨nent Ã  des nÅ“uds : header, main, footer, h1, h2... et Ã  une feuille : texte.](https://user.oc-static.com/upload/2023/05/09/16836136690232_STATIC-P3C1.png)](https://user.oc-static.com/upload/2023/05/09/16836136690232_STATIC-P3C1.png)

Dans la structure ci-dessus :

- le _body_ en haut reprÃ©sente la racine de lâ€™arbre DOMÂ ;
- de cette racine se dÃ©ploient des **branches** (en bleu sur lâ€™image)Â ;
- ces branches mÃ¨nent Ã  des **nÅ“uds**Â : _header_, _main, footer, h1, h2, div, pâ€¦_Â ;
- les branches se terminent gÃ©nÃ©ralement par une **feuille**Â : _texte_.Â 

En dÃ©veloppement informatique, on dit que _header, main et footer_ sont les noeuds **enfants** de _body_, et que _body_ est le **parent** de ces nÅ“uds.

Chaque nÅ“ud de cet arbre DOM (_header_, _main_, _div_â€¦) est un **objet HTMLElement**. Pour le dire autrement, JavaScript a regroupÃ© dans un mÃªme objet deux chosesÂ :Â 

- les informations sur cet objet (son nom, son id, sa position, etc.)Â : ce sont les **propriÃ©tÃ©s** de lâ€™objetÂ ;
- ce que cet objet est capable de faire (rÃ©agir au clic, par exemple)Â : ce sont les **mÃ©thodes**.Â 

Dans ce cours, nous explorons plusieurs propriÃ©tÃ©s et mÃ©thodes, mais il en existe dâ€™autres. Si vous voulez en savoir plus, la [documentation](https://developer.mozilla.org/fr/docs/Web/API/HTMLElement) est Ã  votre disposition.Â ğŸ˜ƒ

# RÃ©cupÃ©rez un Ã©lÃ©ment du DOM

Dans ce chapitre, notre but est de rÃ©cupÃ©rer certains Ã©lÃ©ments de lâ€™arbre DOM, qui a pour racine la balise _body_. Cependant, vous vous souvenez peut-Ãªtre que nos fichiers JavaScript sont stockÃ©s dans la balise _head,_ qui se situe **avant** le _body_.

## Utilisez defer pour diffÃ©rer lâ€™exÃ©cution du script

Pour manipuler le DOM, JavaScript doit ainsi construire une variable globale, _**document**_, qui est donc accessible depuis nâ€™importe oÃ¹ dans notre code. Cependant, pour construire cette variable, la page HTML doit Ãªtre chargÃ©e en entier. Or, le script Ã©tant lancÃ© dans la balise head, avant que le body ne sâ€™affiche Ã  lâ€™Ã©cran, la page HTML nâ€™existe pas encore. Nous devons donc attendre que la page ait fini de charger avant dâ€™utiliser la variable _document._

Pour rÃ©soudre ce problÃ¨me, la mÃ©thode la plus efficace est dâ€™**ajouter le mot-clÃ©** _**defer**_ **dans la balise script**. ConcrÃ¨tement, cela revient Ã  demander au navigateur â€œSi tu rencontres la balise script, **diffÃ¨re** sa prise en compte et attends que la page soit chargÃ©e.â€

```
<script src="scripts/config.js" defer></script>
<script src="scripts/script.js" defer></script>
<script src="scripts/main.js" defer></script>
```

## Utilisez diffÃ©rentes syntaxes pour rÃ©cupÃ©rer un Ã©lÃ©ment

JavaScript propose tout un Ã©ventail de mÃ©thodes pour rÃ©cupÃ©rer les Ã©lÃ©ments du DOM. Dans ce chapitre, nous en aborderons troisÂ :

- getElementById ;
- querySelector ;
- querySelectorAll.

Il existe bien sÃ»r dâ€™autres mÃ©thodes, et je vous invite dâ€™ailleurs Ã  les dÃ©couvrir par vous-mÃªme. Lâ€™essentiel est de **choisir la mÃ©thode la plus adaptÃ©e Ã  la problÃ©matique** suivanteÂ : cibler le ou les Ã©lÃ©ments qui nous intÃ©ressent au milieu dâ€™une page HTML souvent trÃ¨s consÃ©quente.Â 

### RÃ©cupÃ©rez un Ã©lÃ©ment avec _getElementById_

La premiÃ¨re mÃ©thode, et probablement la plus simple, est getElementById. Comme son nom lâ€™indique, elle permet de rÃ©cupÃ©rer un Ã©lÃ©ment en fournissant son id en paramÃ¨tre.

> Dans notre application par exemple, nous affichions jusquâ€™Ã  maintenant le mot Ã  recopier dans le texte du _prompt_. DÃ©sormais, notre objectif est de lâ€™afficher dans une zone de la page dÃ©diÃ©e.

Pour cela, nous pouvons commencer par crÃ©er une _div_ dans le HTML. Pour la distinguer des autres, nous lui fournissons un idÂ :

```
<body>
    <div id="zoneProposition">Cachalot</div>
</body>
```

Pour accÃ©der Ã  cette balise, nous allons donc Ã©crireÂ :

```
let baliseZoneProposition = document.getElementById("zoneProposition");
console.log(baliseZoneProposition);
```

Ici, nous avons demandÃ© Ã  JavaScript, depuis _document_, donc toute la pageÂ : â€œTrouve-moi un Ã©lÃ©ment HTML qui a pour id _zonePropositionâ€_. Puis nous avons mis le rÃ©sultat dans la variable _baliseZoneProposition_.Â 

Quand nous faisons un console.log de cette variable, nous constatons bien le contenu de notre variable _baliseZoneProposition_, et nous retrouvons bien notre divÂ :

[![Ã€ gauche de la capture d'Ã©cran : un petit triangle Ã  cÃ´tÃ© d'une div.](https://user.oc-static.com/upload/2023/04/12/16813147039516_image20.png)](https://user.oc-static.com/upload/2023/04/12/16813147039516_image20.png)

Cette variable est un objet de type _HTMLElement_. Si nous cliquons sur le petit triangle Ã  cÃ´tÃ© de cette div pour dÃ©ployer le contenu, les dÃ©tails de cet objet HTMLElement vont sâ€™afficher, comme dans la capture dâ€™Ã©cran ci-dessous.

[![Les dÃ©tails de la div id= sont affichÃ©es sur la capture d'Ã©cran (20 lignes).](https://user.oc-static.com/upload/2023/04/12/168131474106_image4.png)](https://user.oc-static.com/upload/2023/04/12/168131474106_image4.png)

DÃ©tail dâ€™un objet HTMLElement

*Ah ouiâ€¦. Ca fait beaucoup d'informations, tout Ã§aÂ !*

Eh ouiâ€¦ JavaScript propose beaucoup de propriÃ©tÃ©s et de mÃ©thodes sur les objets HTLMElement. Pour vous, ce sont autant dâ€™opportunitÃ©s dâ€™aller les piocher en fonction de vos besoinsÂ !

Enfin, comme pour nâ€™importe quel objet en JavaScript, vous pouvez accÃ©der aux propriÃ©tÃ©s de votre nÅ“ud grÃ¢ce au point â€œ**.**â€ .

> Par exemple, pour afficher la hauteur de lâ€™Ã©lÃ©ment dans votre console, vous pouvez Ã©crire :

```
console.log(baliseZoneProposition.clientHeight);
```

### RÃ©cupÃ©rez un Ã©lÃ©ment QuerySelector

Lorsquâ€™on a un id sur nos Ã©lÃ©ments, document.getElementById est une bonne option pour les rÃ©cupÃ©rer. Malheureusement, il arrive rÃ©guliÃ¨rement que Ã§a ne soit pas le casÂ !

JavaScript a donnÃ© une rÃ©ponse particuliÃ¨rement intuitive Ã  ce problÃ¨meÂ : utiliser les sÃ©lecteurs CSS. En gros, si vous savez dÃ©signer un Ã©lÃ©ment en CSS, alors il vous suffit de reprendre exactement la mÃªme syntaxeÂ !Â ğŸ˜ƒ

> Modifions lÃ©gÃ¨rement le contenu de notre page HTML pour illustrer celaÂ :

```
<body>
    <div id="zoneProposition">
        Entrez le mot : <span>Cachalot</span>
    </div>
</body>
```

Pour mettre le mot _Cachalot_ en gras en CSS, nous aurions Ã©critÂ :

```
#zoneProposition span {
    font-weight: bold;
}
```

Ce code signifie : â€œIl faut mettre la police dâ€™Ã©criture en **gras** pour tous les _span_ contenus dans un Ã©lÃ©ment qui a lâ€™id _zoneProposition_.â€

querySelector nous permet de trouver le premier Ã©lÃ©ment qui correspond au sÃ©lecteur CSS proposÃ©Â :

```
let baliseZonePropositionSpan = document.querySelector("#zoneProposition span");
console.log(baliseZonePropositionSpan);
```

Et voilÃ  le rÃ©sultat dans la capture dâ€™Ã©cran ci-dessousÂ : nous voyons dans la console que nous avons bien trouvÃ© notre span.

[![Capture d'Ã©cran. Sous l'onglet Console,  s'affiche Ã  droite d'un petit triangle.](https://user.oc-static.com/upload/2023/04/12/16813149663822_image3.png)](https://user.oc-static.com/upload/2023/04/12/16813149663822_image3.png)

Notez que Â `#`Â  est prÃ©sent devant lâ€™id, comme on lâ€™Ã©crirait en CSS, alors que ce Â `#`Â  nâ€™Ã©tait pas nÃ©cessaire avec getElementById.

### RÃ©cupÃ©rez plusieurs Ã©lÃ©ments avec QuerySelectorAll

Ici, le principe est le mÃªme que pour **tous les Ã©lÃ©ments dans une liste de type** **_NodeList_** (ou liste de nÅ“uds, en franÃ§ais).

Modifions Ã  nouveau notre body :

```
<body>
    <div class="zoneChoix">
        <input type="radio" name="optionSource" id="mots" value="1" checked>
        <label for="mots">Mots</label>
        <input type="radio" name="optionSource" id="phrases" value="2">
        <label for="phrases">Phrases</label>
    </div>
    <div class="zoneProposition">
        Entrez le mot : <span>Cachalot</span>
    </div>
</body>
```

Dans ce code, jâ€™ai ajoutÃ© une nouvelle _div_ avec la classe _zoneChoix_. Cette _div_ contient deux inputs de type radio.

Pour rÃ©cupÃ©rer tous les inputs de type radio dâ€™un seul coup, je peux donc Ã©crireÂ :

```
let listeInputRadio = document.querySelectorAll(".zoneChoix input");
console.log(listeInputRadio);
```

Notez que jâ€™ai Ã©crit _.zoneChoix_ et pas #, car ici, jâ€™ai mis une classe Ã  ma _div_ et pas un _id_.

Et voici le rÃ©sultat : nous obtenons une _NodeList_.

[![Sous l'onglet Console, la NodeList s'affiche Ã  droite d'un petit triangle.](https://user.oc-static.com/upload/2023/04/12/16813151329823_image13.png)](https://user.oc-static.com/upload/2023/04/12/16813151329823_image13.png)

Nous voyons bien ici notre _NodeList_. Pour reprendre lâ€™image de lâ€™arbre DOM, JavaScript a sÃ©lectionnÃ© dans cet arbre les nÅ“uds qui correspondent Ã  notre sÃ©lecteur CSS.

Nous allons devoir parcourir les diffÃ©rents Ã©lÃ©ments de cette liste un par un pour y accÃ©der. Nous utiliserons donc une boucleÂ :

```
for (let i = 0; i < listeInputRadio.length; i++) {
    console.log(listeInputRadio[i]);
}
```

Et voilÃ  le rÃ©sultat, nous retrouvons bien le dÃ©tail de tous nos Ã©lÃ©mentsÂ :

[![Capture d'Ã©cran affichant deux lignes qui dÃ©taillent  les Ã©lÃ©ments.](https://user.oc-static.com/upload/2023/04/12/16813152092052_image22.png)](https://user.oc-static.com/upload/2023/04/12/16813152092052_image22.png)

RÃ©sultat de la boucle qui parcourt les Ã©lÃ©ments dâ€™une NodeListe

# Ã€ vous de jouer !

Dans cet exercice, je vous propose de rÃ©cupÃ©rer plusieurs Ã©lÃ©ments dont nous aurons besoin dans le chapitre suivant, lorsque nous procÃ©derons Ã  la modification de la page.

Comme jâ€™aime vous faciliter la vie, jâ€™ai modifiÃ© lÃ©gÃ¨rement le projet et rÃ©alisÃ© la partie HTML/CSS pour cet exercice. [Vous la trouverez ici.](https://github.com/OpenClassrooms-Student-Center/7696886-javascript/tree/P3-C1---R%C3%A9cup%C3%A9rez-un-%C3%A9l%C3%A9ment---Base)

Dans le fichier main.js :

- SÃ©lectionnez avec la mÃ©thode getElementById :Â 
    - lâ€™input dans lequel le joueur va Ã©crire son texteÂ ;Â 
    - le bouton de validation.

- SÃ©lectionnez avec la mÃ©thode querySelector :Â 
    - lâ€™endroit oÃ¹ le mot proposÃ© sera affichÃ©Â ;
    - lâ€™endroit oÃ¹ le score sera affichÃ©.Â 

- SÃ©lectionnez avec la mÃ©thode querySelectorAll :Â 
    - les boutons radio de choix.Â 

Nâ€™oubliez pas de vÃ©rifier que la sÃ©lection est correcte Ã  chaque fois, en utilisant un console.logÂ !

## CorrigÃ©

Vous pouvez vÃ©rifier votre travail en consultant [le corrigÃ©](https://github.com/OpenClassrooms-Student-Center/7696886-javascript/tree/P3-C1---R%C3%A9cup%C3%A9rez-un-%C3%A9l%C3%A9ment---Correction-de-l'exercice).

# En rÃ©sumÃ©

- Une page web est constituÃ©e de balises HTML, et repose sur une structure que lâ€™on appelle DOM. Cette structure permet de relier les balises entre elles.
- Pour rÃ©cupÃ©rer un Ã©lÃ©ment du DOM :
    - utilisez _defer_ dans lâ€™inclusion de vos fichiers JS pour retarder leur prise en compte, afin que la variable _document_ ait le temps dâ€™Ãªtre crÃ©Ã©eÂ ;Â 
    - partez du point dâ€™entrÃ©e du DOM : la variable _document_Â ;
    - utilisez les mÃ©thodes adaptÃ©esÂ : getElementById, querySelector ou querySelectorAll.

_Bravo, vous avez franchi la premiÃ¨re Ã©tape pour modifier le contenu de votre page HTML. Vous savez dÃ©sormais rÃ©cupÃ©rer des HMLTElements pour les manipuler depuis votre codeÂ ! Dans le prochain chapitre, nous allons modifier la page en ajoutant des Ã©lÃ©ments, ou en modifiant les classes CSSÂ !_