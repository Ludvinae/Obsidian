
Dans le chapitre précédent, nous avons défini et rédigé un algorithme qui permet de tester si l’utilisateur a bien tapé le mot proposé par l’application. Mais il arrive régulièrement d’avoir envie de répéter du code. C’est le cas pour notre application : nous voulons maintenant demander à l’utilisateur de tester un mot trois fois de suite.

Alors, comment demander à JavaScript de réaliser ces répétitions à notre place dans le code ? La réponse est dans ce chapitre : en utilisant des boucles !

# Découvrez les boucles

En tant que développeur, vous aurez parfois besoin de faire plusieurs fois la même action sur une variable ou sur une partie de votre code. Dans cette situation, vous devrez utiliser des boucles.

Une **boucle** est une structure conditionnelle qui permet de répéter un certain nombre de fois du code, jusqu’à ce qu’un test ne soit plus vrai.

Rappelez-vous, dans l’exercice du chapitre précédent, nous avons déclaré un tableau qui contient trois mots : Cachalot, Pétunia et Serviette.

Pour afficher chacun de ces mots, on peut donc écrire :

```
const listeMots = ['Cachalot', 'Pétunia', 'Serviette']
console.log(listeMots[0])
console.log(listeMots[1])
console.log(listeMots[2])
```

Mais imaginez maintenant que le tableau contienne tout un dictionnaire… Ça va faire beaucoup de _console.log_ ! 😱 D’autant qu’à chaque ligne, une seule chose change : l’indice du tableau (0, 1, 2…). Je vous propose donc de rédiger une boucle qui va nous permettre de répéter du code, et de résoudre ce problème.

# Rédigez une boucle

Il  existe deux principaux types de boucles :

- La **boucle** _**for**_ permet de répéter du code lorsque l’on sait d’avance combien de fois il faudra le répéter.

Par exemple, si nous voulons demander **exactement trois fois** à l’utilisateur d’entrer un mot.

- La **boucle** _**while**_ permet de répéter du code autant de fois qu’il le faut pour qu’une condition ne soit plus vraie.

Par exemple, si nous voulons redemander un mot à l’utilisateur **jusqu’à ce que** ce mot soit correct.

Comme toujours, je vous propose de découper notre problème en petites étapes. 😉

## Utilisez l’instruction _for_ pour répéter du code un certain nombre de fois

Commençons par écrire une boucle qui affiche 0, puis 1, puis 2. Dans ce cas, **nous savons à l’avance combien de tours de boucle** nous voulons faire, un _for_ est donc tout à fait indiqué ici.

Pour rédiger notre boucle _for,_ nous allons utiliser l’instruction _for_ (“pour”, en anglais). Cette instruction sera suivie d’une condition entre parenthèses dans laquelle on indiquera : 

- le départ de la boucle ;
- au bout de combien de tours la boucle devra s’arrêter.

Voici comment la rédiger :

```
for (let compteur = 0; compteur < 3; compteur = compteur + 1) {
    console.log(compteur)
}
```

*Ouh là là… Je ne suis pas sûr d’avoir tout suivi…*

Aucun souci, voyons en détail ce qui est écrit.

- Nous avons d’abord notre _for_, suivi de trois instructions séparées par un point virgule “;”.
- Ensuite, un bloc de code entre accolades : le _console.log_. 
- Ce bloc de code sera exécuté à **chaque** tour de boucle. 

**Première instruction :**
```
let compteur = 0
```

Ici nous définissons une nouvelle variable appelée “_compteur_”, et qui contient 0.

**Deuxième instruction :**
```
compteur < 3
```

Ceci est la condition d’arrêt.

La boucle continuera **tant que** _compteur_ est plus petit que 3.

**Troisième instruction :**
```
compteur = compteur + 1
```

À chaque tour de boucle, on fait évoluer la valeur de _compteur_. Ici, on dit que _compteur_ vaut la valeur précédente de _compteur_, plus 1.

Au premier tour de boucle, _compteur_ vaut 0, puis 1, puis 2, jusqu’à ce que _compteur_ arrive à 3 (la condition d'arrêt) et là, on sort de la boucle. 

Le bloc de code entre accolades aura donc été exécuté 3 fois avec _compteur_ ayant la valeur 0, puis 1, puis 2.

Il est très courant en programmation d’utiliser une boucle _for_. Pour la taper plus vite, il existe donc une écriture un peu raccourcie. Par convention, on nomme souvent la variable compteur “_i_” (comme “indice”). Et au lieu d’écrire _i = i+1_, on utilise l’opérateur d’incrémentation  `++`  , qui augmente la valeur d’une variable de 1.

Cela donne :

```
for (let i = 0; i < 3; i++) {
    console.log(i)
}
```

Le résultat est exactement le même.

Grâce à la boucle _for_, nous avons donc répété du code, de manière à ne pas écrire plusieurs fois la ligne de code_`console.log()`_ .

## Utilisez l’instruction _while_ pour répéter du code

La boucle _for_ est utilisée lorsque l'on connaît en amont le nombre de tours à effectuer. Mais cela n’est pas toujours possible ! Dans ce cas, nous utiliserons la boucle _**while**_, qui peut s’adapter à tous les cas.

Reprenons notre exemple de compteur avec un algorithme différent :

`**Tant que** le compteur n’est pas égal à 3, on augmente le compteur de 1.`

Pour rédiger cette boucle _while_, nous allons utiliser la structure conditionnelle _**while**_ (“tant que”, en français) qui sera suivie d’une condition entre parenthèses. Cette condition indique le moment où notre boucle doit s’arrêter.

Nous allons donc écrire :

```
let i = 0
while (i < 3) {
    console.log(i)
    i++
}
```

Dans le code ci-dessus :

- on déclare la variable _i_, que l’on initialise à zéro, **avant** la boucle ;
- le _while_ ne contient que la condition d’arrêt : **tant que** _i_ est plus petit que 3 ;
- on incrémente _i_ (_i_ va gagner +_1_ à chaque tour de boucle). 

Attention ! Si vous oubliez d’augmenter la valeur de _i_, alors la condition _i < 3_ sera toujours vraie, et vous aurez une boucle infinie ! Cela peut même faire planter votre navigateur !

Je vous invite à revoir ces opérations dans la vidéo ci-dessous :

# À vous de jouer !

Jusqu’à maintenant, nous avons répété trois fois les mêmes instructions dans notre projet :

- 3 “prompts”, qui nous ont permis de demander des mots à l’utilisateur ;
- 3 fois le test pour vérifier que le mot tapé par l’utilisateur est correct.

Je vous propose de factoriser ce code, c'est-à-dire de mettre en commun les parties répétées à l’aide d'une boucle.

## Étape 1 : répétez votre code avec une boucle

Dans ce [dossier GitHub](https://github.com/OpenClassrooms-Student-Center/7696886-javascript/tree/P2-C2---Conditions), le tableau _listeMots_ contient 3 mots : “Cachalot”, “Pétunia” et “Serviette”. Pour chacun de ces mots, à l’aide d’une boucle _for_ : 

- demandez à l’utilisateur de le retaper avec _prompt_ ;
- comptez un point par mot correctement tapé ;
- affichez le score à la fin avec un _console.log_. 

Gardez en tête que l’emplacement des instructions est particulièrement important pour le fonctionnement du code ! Ce qui se trouve dans le bloc d’instruction de la boucle est répété, mais pas ce qui est à l’extérieur.

Ici, votre objectif est de répéter certaines instructions comme le _prompt,_ mais pas toutes les instructions (le score, lui, ne doit pas être affiché). 

## Étape 2 : proposez deux types de listes de mots

Pour rendre le jeu plus engageant, nous voulons que l’utilisateur puisse avoir le choix entre deux listes de mots différentes : une liste avec des **mots** et une liste avec des **phrases**.

- Déclarez un tableau _listePhrases_ qui contient 3 courtes phrases : “Pas de panique !”, “La vie, l’univers et le reste”, “Merci pour le poisson”.
- Demandez à l’utilisateur s’il veut la liste de mots ou la liste de phrases. **Répétez** la question **tant que** l’utilisateur n’a pas écrit “mots” ou “phrases”.
- Lancez votre boucle _for_, avec la liste que l’utilisateur a choisie. 

Pour cet exercice, vous pouvez copier deux fois la boucle de jeu :

- une fois dans le _if_ ;
- une fois dans le _else_. 

Mais bien sûr, il existe d’autres manières de réussir l’exercice !

## Corrigé

Vous pouvez vérifier votre travail en consultant [le corrigé](https://github.com/OpenClassrooms-Student-Center/7696886-javascript/tree/P2-C3---Les-boucles) et la vidéo ci-dessous : 

# En résumé

- Une boucle est une structure conditionnelle qui permet de répéter du code plusieurs fois.
- La boucle _for_ permet de répéter du code pour un nombre défini de fois.
- La boucle _while_ permet de répéter du code jusqu’à ce qu’une condition ne soit plus remplie.

_Vous savez désormais répéter du code grâce aux boucles ! Suivez-moi dans le chapitre suivant pour utiliser des fonctions !_